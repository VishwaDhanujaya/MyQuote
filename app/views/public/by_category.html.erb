<header class="section__header section__header--with-back">
  <div>
    <p class="section__eyebrow">Category</p>
    <h1 class="section__title"><%= @category.name %></h1>
    <p class="section__subtitle">A curated collection of reflections on <%= @category.name.downcase %>.</p>
  </div>
  <%= link_to "← Back to categories", categories_path, class: "link-back" %>
</header>

<section class="section">
  <% if @quotes.any? %>
    <ul class="quote-grid">
      <% @quotes.each do |quote| %>
        <li class="quote-grid__item">
          <article class="quote-card quote-card--elevated" data-quote-modal-trigger>
            <blockquote class="quote-card__blockquote">
              <p class="quote-card__text">“<%= quote.text %>”</p>
            </blockquote>
            <footer class="quote-card__meta">
              <p class="quote-card__meta-line">
                <span class="quote-card__meta-author"><%= [quote.philosopher.first_name, quote.philosopher.last_name].compact.join(' ') %></span>
                <span class="quote-card__meta-contributor">Shared by <%= quote.user.first_name %></span>
              </p>
            </footer>
            <div class="quote-card__modal-content" data-quote-modal-content hidden>
              <dl class="quote-modal__details">
                <div>
                  <dt>Philosopher</dt>
                  <dd>
                    <%= [quote.philosopher.first_name, quote.philosopher.last_name].compact.join(' ') %>
                    <% if quote.philosopher.birth_year.present? || quote.philosopher.death_year.present? %>
                      <span class="quote-modal__years">(<%= [quote.philosopher.birth_year, quote.philosopher.death_year].compact.join(' – ') %>)</span>
                    <% end %>
                  </dd>
                </div>
                <div>
                  <dt>Shared by</dt>
                  <dd><%= quote.user.first_name %></dd>
                </div>
                <% if quote.philosopher.biography.present? %>
                  <div>
                    <dt>About the philosopher</dt>
                    <dd><%= quote.philosopher.biography %></dd>
                  </div>
                <% end %>
                <% if quote.publication_year.present? %>
                  <div>
                    <dt>Publication year</dt>
                    <dd><%= quote.publication_year %></dd>
                  </div>
                <% end %>
                <% if quote.user_comment.present? %>
                  <div>
                    <dt>Reflection</dt>
                    <dd><%= quote.user_comment %></dd>
                  </div>
                <% end %>
                <% if quote.categories.any? %>
                  <div>
                    <dt>Categories</dt>
                    <dd>
                      <% quote.categories.each do |category| %>
                        <span class="tag"><%= category.name %></span>
                      <% end %>
                    </dd>
                  </div>
                <% end %>
              </dl>
            </div>
          </article>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p class="empty-state">No public quotes are available for this category yet. Check back soon.</p>
  <% end %>
</section>
