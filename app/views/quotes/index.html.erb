<h1><%= admin? ? "All Quotes" : "My Quotes" %></h1>
<p><%= link_to "New Quote", new_my_quote_path %></p>

<% if @quotes.any? %>
  <table>
    <thead>
      <tr>
        <th>Quote</th>
        <th>Philosopher</th>
        <th>Visibility</th>
        <th>Categories</th>
        <% if admin? %>
          <th>Owner</th>
        <% end %>
        <th colspan="3"></th>
      </tr>
    </thead>
    <tbody>
      <% @quotes.each do |quote| %>
        <tr>
          <td><%= truncate(quote.text, length: 100) %></td>
          <td><%= [quote.philosopher.first_name, quote.philosopher.last_name].compact.join(' ') %></td>
          <td><%= quote.is_public? ? "Public" : "Private" %></td>
          <td><%= quote.categories.map(&:name).join(', ') %></td>
          <% if admin? %>
            <td><%= quote.user.first_name %> <%= quote.user.last_name %></td>
          <% end %>
          <td><%= link_to "View", my_quote_path(quote) %></td>
          <td><%= link_to "Edit", edit_my_quote_path(quote) %></td>
          <td>
            <%= button_to "Delete", my_quote_path(quote), method: :delete, data: { confirm: "Are you sure?" } %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>No quotes found.</p>
<% end %>
