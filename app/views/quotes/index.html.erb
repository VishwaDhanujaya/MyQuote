<section class="section-header">
  <div class="section-header__text">
    <h1 class="page-title"><%= admin? ? "All Quotes" : "My Quotes" %></h1>
    <p class="page-subtitle">
      <%= admin? ? "Review every quote in the collection with quick access to actions." : "Curate your personal library of wisdom and keep it beautifully organized." %>
    </p>
  </div>
  <%= link_to "Add quote", new_quote_path, class: "button" %>
</section>

<% if @quotes.any? %>
  <section class="quotes-grid" aria-live="polite">
    <% @quotes.each do |quote| %>
      <article class="quote-card">
        <%= link_to quote_path(quote), class: "quote-card__link" do %>
          <span class="sr-only">View quote details</span>
        <% end %>
        <p class="quote-card__text">“<%= truncate(quote.text, length: 180) %>”</p>

        <div class="quote-card__meta">
          <div class="quote-card__meta-row">
            <span class="quote-card__meta-label">Philosopher</span>
            <span><%= [quote.philosopher.first_name, quote.philosopher.last_name].compact.join(' ') %></span>
          </div>
          <div class="quote-card__meta-row">
            <span class="quote-card__meta-label">Visibility</span>
            <span><%= quote.is_public? ? "Public" : "Private" %></span>
          </div>
          <% if quote.publication_year.present? %>
            <div class="quote-card__meta-row">
              <span class="quote-card__meta-label">Year</span>
              <span><%= quote.publication_year %></span>
            </div>
          <% end %>
          <% if quote.categories.any? %>
            <div class="quote-card__chips" aria-label="Categories">
              <% quote.categories.each do |category| %>
                <span class="chip"><%= category.name %></span>
              <% end %>
            </div>
          <% end %>
          <% if admin? %>
            <div class="quote-card__meta-row">
              <span class="quote-card__meta-label">Owner</span>
              <span><%= [quote.user.first_name, quote.user.last_name].compact.join(' ') %></span>
            </div>
          <% end %>
        </div>

        <div class="quote-card__actions">
          <%= link_to "Edit", edit_quote_path(quote), class: "button button--ghost button--sm" %>
          <%= button_to "Delete", quote_path(quote), method: :delete, data: { confirm: "Are you sure?" }, class: "button button--danger button--sm" %>
        </div>
      </article>
    <% end %>
  </section>
<% else %>
  <p class="page-subtitle">No quotes found.</p>
<% end %>
